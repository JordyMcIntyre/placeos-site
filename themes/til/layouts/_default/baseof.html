<!doctype html>
<html
  lang="{{ or site.Language.LanguageCode }}"
  dir="{{ or site.Language.LanguageDirection `ltr` }}"
>
  <head>
    {{ partial "head.html" . }}
  </head>
  <body>
    {{ if .IsHome }}
      <!-- Header: narrow prose wrapper -->
      <div class="container mx-auto max-w-prose flex flex-col space-y-10 p-4 md:p-6">
        <header class="flex items-center justify-between">
          {{ partial "header.html" . }}
        </header>
      </div>

      <!-- Main: wide up to 1080px, width control separate from typography -->
      <div class="mx-auto w-full max-w-[1080px] px-4 flex flex-col space-y-10">
        <article class="prose prose-slate md:prose-lg prose-h1:text-[2em] mx-auto max-w-full" id="maincontent">
          {{ block "main" . }}{{ end }}
        </article>
      </div>

      <!-- Footer: back to narrow/prose -->
      <div class="container mx-auto max-w-prose flex flex-col space-y-10 p-4 md:p-6">
        <footer class="mt-20 border-t border-neutral-100 pt-2 text-xs">
          {{ partial "footer.html" . }}
        </footer>
      </div>
    {{ else }}
      <!-- non-home: everything in narrow prose wrapper -->
      <div class="container mx-auto max-w-prose flex flex-col space-y-10 p-4 md:p-6">
        <header class="flex items-center justify-between">
          {{ partial "header.html" . }}
        </header>
        <main class="prose prose-slate relative md:prose-lg prose-h1:text-[2em]" id="maincontent">
          {{ block "main" . }}{{ end }}
        </main>
        <footer class="mt-20 border-t border-neutral-100 pt-2 text-xs">
          {{ partial "footer.html" . }}
        </footer>
      </div>
    {{ end }}
    {{ if .Store.Get "hasMermaid" }}
      <script
        src="https://cdn.jsdelivr.net/npm/mermaid@11.4.0/dist/mermaid.min.js"
        integrity="sha256-G8ouPAnw4zzMbnAenHnVz6h9XpKbNdOkrqTh7AadyHs="
        crossorigin="anonymous"
      ></script>
      <script type="text/javascript">
        mermaid.initialize({
          startOnLoad: true,
          theme: 'neutral',
          fontFamily: "'LatoLatinWeb', sans-serif"
        });
      </script>
    {{ end }}
      <script src="/js/theme-toggle.js"></script>
      <script src="/js/gradient-animation.js"></script>
  </body>
</html>
