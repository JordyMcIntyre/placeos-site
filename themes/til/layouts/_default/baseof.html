<!doctype html>
<html
  lang="{{ or site.Language.LanguageCode }}"
  dir="{{ or site.Language.LanguageDirection `ltr` }}"
>
  <head>
    {{ partial "head.html" . }}
  </head>
  <body>
    {{ partial "header.html" . }}
    
    {{ if .IsHome }}
      <!-- Main: wide up to 1080px, width control separate from typography -->
      <div class="mx-auto w-full max-w-[1080px] px-4 flex flex-col space-y-10">
        <article class="prose prose-slate md:prose-lg prose-h1:text-[2em] mx-auto max-w-full" id="maincontent">
          {{ block "main" . }}{{ end }}
        </article>
      </div>
    {{ else }}
      <!-- non-home: everything in narrow prose wrapper -->
      <!-- prose container for header & main content -->
      <div class="container mx-auto max-w-prose flex flex-col space-y-10 p-4 md:p-6">
        <main
          class="prose prose-slate relative md:prose-lg prose-h1:text-[2em]"
          id="maincontent"
        >
          {{ block "main" . }}{{ end }}
        </main>
      </div>
    {{ end }}
    {{/* single footer, width varies by page */}}
    {{ $fw := cond .IsHome "max-w-[1080px]" "max-w-prose" }}
    <div
      class="fixed inset-x-0 bottom-0 w-full
             bg-white/25 dark:bg-gray-900/40
             backdrop-blur-lg mask-gradient z-50"
    >
      <div class="mx-auto w-full {{ $fw }} px-4 py-12">
        <footer class="border-t border-neutral-100 pt-2">
          {{ partial "footer.html" . }}
        </footer>
      </div>
    </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
    {{ if .Store.Get "hasMermaid" }}
      <script
        src="https://cdn.jsdelivr.net/npm/mermaid@11.4.0/dist/mermaid.min.js"
        integrity="sha256-G8ouPAnw4zzMbnAenHnVz6h9XpKbNdOkrqTh7AadyHs="
        crossorigin="anonymous"
      ></script>
      <script type="text/javascript">
        mermaid.initialize({
          startOnLoad: true,
          theme: 'neutral',
          fontFamily: "'LatoLatinWeb', sans-serif"
        });
      </script>
    {{ end }}
      <script src="/js/theme-toggle.js"></script>
      <script src="/js/gradient-animation.js"></script>
      <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5B3FL7Z"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<!-- Project Settings > Custom Code > Footer Code -->

<script src="https://unpkg.com/@botpoison/browser" async></script>

<script type="text/javascript">
  document.querySelectorAll('form[action^="https://submit-form.com"]').forEach(form => {
  form.addEventListener('submit', async function (e) {
    e.preventDefault();

    const botpoison = new Botpoison({
      publicKey: 'pk_c7d39b30-2471-4ff9-8f3c-ac7d67a1239b',
    });

    try {
      const result = await botpoison.challenge();

      const formData = new FormData(form);
      formData.append('_botpoison', result.solution);

      const response = await fetch(form.action, {
        method: 'POST',
        body: formData,
      });

      const parent = form.parentElement;

      if (response.ok) {
        form.style.display = 'none';
        parent.querySelector('.w-form-done').style.display = 'block';
      } else {
        parent.querySelector('.w-form-fail').style.display = 'block';
      }
    } catch (error) {
      const parent = form.parentElement;
      parent.querySelector('.w-form-fail').style.display = 'block';
    }
  });
});

</script>
<script src="/js/anchors.js"></script>

  </body>
</html>
